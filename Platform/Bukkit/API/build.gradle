dependencies {
    // API Build
    implementation project(":Library:LightDI")
    implementation project(":Library:ProtoWeaver:Common:API")
    implementation project(":Library:ProtoWeaver:Bukkit:API")

    compileOnly 'me.clip:placeholderapi:2.11.6'
    compileOnly 'io.th0rgal:oraxen:1.168.0'
    compileOnly 'com.github.LoneDev6:API-ItemsAdder:3.6.2-beta-r3-b'
    compileOnly 'net.Indyuce:MMOItems-API:6.9.5-SNAPSHOT'
    compileOnly 'io.lumine:MythicLib-dist:1.5.2-SNAPSHOT'

    compileOnly "com.github.MilkBowl:VaultAPI:1.7.1"
    compileOnly 'com.comphenix.protocol:ProtocolLib:5.1.0'
    compileOnly 'net.luckperms:api:5.4'

    implementation "io.papermc:paperlib:1.0.7"
    implementation "net.kyori:adventure-platform-bukkit:4.3.4"
}


shadowJar {
    relocate 'io.papermc.lib', 'kr.rtuserver.lib.bukkit.api.utility.paper'
    relocate 'net.kyori.adventure.platform.bukkit', 'kr.rtuserver.lib.bukkit.api.utility.kyori'

    exclude "org/checkerframework/**"
    exclude "edu/umd/cs/findbugs/**"
    exclude "javax/**"
    exclude "javassist/**"
    exclude "net/jcip/**"
    exclude "net/kyori/**"
    exclude "org/reflections/**"
    exclude "com/google/**"
    exclude "io/netty/**"
    exclude "META-INF/**"
    exclude "classpath.index"
}

java {
    toolchain.languageVersion.set(JavaLanguageVersion.of(17))
}
tasks.withType(JavaCompile).configureEach {
    //options.compilerArgs += ['-source', '17', '-target', '17']
}

compileJava {
    mustRunAfter(":Library:MiniMessage:shadowJar")
    mustRunAfter(":Library:LightDI:shadowJar")
    mustRunAfter(":Library:ProtoWeaver:Common:API:shadowJar")
}